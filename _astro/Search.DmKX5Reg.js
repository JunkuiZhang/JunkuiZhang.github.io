import{o as J,i as N,r as T,a as O,s as z}from"./translation.C9pH-Ws6.js";import{p as Q,l as B,i as U,f as K,j as X,t as R,g as e,k as F,a as M,b as Z,s as d,d as l,m as b,c as o,r as c,e as $,h as D}from"./render._D_RCwKb.js";import{e as ee,i as ae}from"./each.twdX4J9P.js";import{I as g,h as te}from"./Icon.cKsBFNbZ.js";import{b as j}from"./input.jHPnfo7T.js";import{I as re}from"./zh_TW.D2G1IM3a.js";import{u as q}from"./url-utils.Cw7EbymZ.js";/* empty css                        */var ie=K(`<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block
       rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"> <!></div> <div class="transition text-sm text-50"><!></div></a>`),se=K(`<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0
         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-1adkdfv"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:!hidden rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-[30rem]
top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-1adkdfv"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
  "><!> <input placeholder="Search" class="pl-10 absolute inset-0 text-sm bg-transparent outline-0
               focus:w-60 text-black/50 dark:text-white/50 svelte-1adkdfv"/></div> <!></div>`,1);function me(V,W){Q(W,!1);let i=b(""),s=b(""),f=b([]),w=!1,n=b(!1);const ne=[{url:q("/"),meta:{title:"This Is a Fake Search Result"},excerpt:"Because the search cannot work in the <mark>dev</mark> environment."},{url:q("/"),meta:{title:"If You Want to Test the Search"},excerpt:"Try running <mark>npm build && npm preview</mark> instead."}],Y=()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")},x=(a,r)=>{const t=document.getElementById("search-panel");!t||!r||(a?t.classList.remove("float-panel-closed"):t.classList.add("float-panel-closed"))},u=async(a,r)=>{if(!a){x(!1,r),d(f,[]);return}if(e(n))try{let t=[];if(w&&window.pagefind){const h=await window.pagefind.search(a);t=await Promise.all(h.results.map(p=>p.data()))}else t=[],console.error("Pagefind is not available in production environment.");d(f,t),x(e(f).length>0,r)}catch(t){console.error("Search error:",t),d(f,[]),x(!1,r)}finally{}};J(()=>{const a=()=>{d(n,!0),w=typeof window<"u"&&!!window.pagefind&&typeof window.pagefind.search=="function",console.log("Pagefind status on init:",w),e(i)&&u(e(i),!0),e(s)&&u(e(s),!1)};document.addEventListener("pagefindready",()=>{console.log("Pagefind ready event received."),a()}),document.addEventListener("pagefindloaderror",()=>{console.warn("Pagefind load error event received. Search functionality will be limited."),a()}),setTimeout(()=>{e(n)||(console.log("Fallback: Initializing search after timeout."),a())},2e3)}),B(()=>(e(n),e(i)),()=>{e(n)&&e(i)&&(async()=>await u(e(i),!0))()}),B(()=>(e(n),e(s)),()=>{e(n)&&e(s)&&(async()=>await u(e(s),!1))()}),U(),N();var _=se(),k=X(_),I=o(k);g(I,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var v=l(I,2);T(v),c(k);var m=l(k,2),A=o(m);g(A,{icon:"material-symbols:search",class:"text-[1.25rem]"}),c(m);var P=l(m,2),y=o(P),S=o(y);g(S,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var L=l(S,2);T(L),c(y);var C=l(y,2);ee(C,1,()=>e(f),ae,(a,r)=>{var t=ie(),h=o(t),p=o(h,!0),G=l(p);g(G,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),c(h);var E=l(h,2),H=o(E);te(H,()=>e(r).excerpt),c(E),c(t),R(()=>{z(t,"href",e(r).url),D(p,e(r).meta.title)}),M(a,t)}),c(P),R(a=>z(v,"placeholder",a),[()=>O(re.search)],$),j(v,()=>e(i),a=>d(i,a)),F("focus",v,()=>u(e(i),!0)),F("click",m,Y),j(L,()=>e(s),a=>d(s,a)),M(V,_),Z()}export{me as default};
